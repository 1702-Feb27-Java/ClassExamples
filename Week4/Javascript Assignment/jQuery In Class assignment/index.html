<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task List</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

    <style>
        html, body{
            width: 100%;
            padding: 0;
            background-color: #394264;
        }

        .container{
            margin: 0 auto;
            padding: 10px;
            width: 550px;
            border: 1px solid #333
        }

        #controls, #task-list{
            margin: 0 auto;
            width: 275px;
            font-size: 1.25em;
            padding: 5px;
        }

        #controls input, #controls button{
            font-size: .75em;
        }

        #task-list{
            min-height: 500px;
            list-style: none;
        }

        .item{
            font-size: 1.5em;
        }

        .deleter{
            color: red;
            padding-left: 5px;
            float:right;
        }

        .deleter:hover{
            cursor: pointer;
        }
		
		.checked{
			font-style: italic;
		}
    </style>
</head>
<body>

    <div class ="container">

        <div id="controls">
            <input type="text" id="new-item"/>
            <button id="add-item">Add</button>
        </div>
        <hr>
        <ul id="task-list">
		<li id="no-tasks">You have 0 tasks for the day</li></ul>
		
    </div>
    
    <script>
    var items = [];
    //jQuery main()
    $(document).ready(function(){
        $("#add-item").click(addItem)
    });

    function removeItem(item){
        console.log("removing item",  item)
        delete items[item]
        item.remove()
        console.log(items)
		
		if($('.item').length == 0){
			$("#no-tasks").show()
		}
		//if($("task-lists").)
    }

    function addItem(e){
        //grab the value from new-item input
        var text = $("#new-item").val()
        console.log("new item entered", text)

        //create a list item and span
        item = document.createElement('li')
        del = document.createElement('span')
		
		
		checkbox =document.createElement('input')
		checkbox.setAttribute("type", "checkbox")
		checkbox = $(checkbox)
		checkbox.on('change', function(e){
			var box = $(e.target);
			if(box.prop('checked')){
				console.log(box.siblings())
				console.log(box.siblings('span'));
				box.siblings(".text-value").addClass('checked');
			} else {
				box.siblings(".text-value").removeClass('checked');
			}
		})

        //select the list element
        list = $('#task-list')

        //using jQuery select the newly create elements
        item = $(item)
        item.addClass('item')
		t = document.createElement('span')
		t = $(t);
		t.addClass('text-value');
		t.html(text);
        //item.html(text)

        del = $(del)
        del.addClass('deleter')
        del.html('X')
        del.click(function(e){
            item = $(e.target.parentNode)
            
            item.slideUp('fast', function(){
                removeItem(item)
            })
        })
		
		//down priority
		goDown = document.createElement('button')
		goDown = $(goDown)
		goDown.text("Down");
		goDown.addClass("d");
		goDown.click(function(e){
			var after = $(e.target).parent().next()
			$(e.target).parent().insertAfter(after)
		})
		
		//up priority
		goUp = document.createElement('button')
		goUp = $(goUp)
		goUp.text("Up");
		goUp.addClass("u");
		goUp.click(function(e){
			var previous = $(e.target).parent().prev()
			$(e.target).parent().insertBefore(previous)
		})
		
		
		
		
		
		
		item.append(checkbox)
		item.append(goUp)
		item.append(goDown)
		item.append(t)
        item.append(del)
		
		list.append(item)

        //tracking purpose
        items[item] = text
        console.log(items)
		$("#no-tasks").hide()
    }
    </script>
</body>
</html>